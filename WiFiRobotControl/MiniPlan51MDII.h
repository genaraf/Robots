#include <Servo.h>
#include <Adafruit_PWMServoDriver.h>

#define ROBOT_NAME "MiniPlan"


// I2C Address 0x40
Adafruit_PWMServoDriver pwm = Adafruit_PWMServoDriver();

// Servos Matrix
const int ALLSERVOS = 18;             // 0 ~ 15 Servo + GPIO12 + GPIO14
const int ALLMATRIX = ALLSERVOS + 1;  // 0 ~ 15 Servo + GPIO12 + GPIO14 + Run Time
const int PWMRES_Min = 1;             // PWM Resolution 1
const int PWMRES_Max = 120;           // PWM Resolution 120

// ES08MDII Pulse Traveling 1500us to 1900us , 120度
const int SERVOMIN = 135;     // 1100
const int SERVOMAX = 450;    // 2600

// APDS9960 proximity sensor
//#define APDS9960_INT      14 // Needs to be an interrupt pin
#define PROX_INT_HIGH     50 // Proximity level for interrupt
#define PROX_INT_LOW      0  // No far interrupt

//#define EYES_LEDS_PIN   13

int GPIO12_PWM;
int GPIO14_PWM;

Servo GPIO12SERVO;
Servo GPIO14SERVO;



/*============================================================================*/
// ES08MDII - No correction
////////////////////////////////    0    ,    1    ,    2    ,    3    ,    4    ,    5    ,     6    ,    7    ,    8    ,    9    ,    10   ,     11   ,     12   ,     13   ,     14   ,     15   ,    G12   ,    G14   ,     ms
int Servo_Act_Fix [ ] PROGMEM = {   0,        0,        0,        0,        0,        0,         0,        0,        0,        0,         0,         0,         0,         0,         0,         0,         0,         0,         0     };


/*============================================================================*/
// ES08MDII - Da Vinci posture
/////////////////////////////////////////////////////    0    ,    1    ,    2    ,    3    ,    4    ,    5    ,    6    ,    7    ,    8    ,    9    ,    10   ,    11   ,    12   ,    13   ,    14   ,    15   ,   G12   ,  G14   ,  ms
int Servo_Act_0 [ ] PROGMEM = {   65,      35,      80,      60,      80,     100,     20,      80,      40,     100,      20,       30,       55,       35,       75,       50,        90,       90,        0     };


/*============================================================================*/
// ES08MDII - stand at attention
////////////////////////////////   0    ,   1    ,   2    ,   3    ,   4    ,   5    ,  6    ,   7    ,   8    ,   9    ,   10   ,    11   ,    12   ,    13   ,    14   ,    15   ,    G12   ,   G14   ,    ms
int Servo_Act_1 [ ] PROGMEM = {   65,      35,      80,      60,      80,     100,     95,      80,      40,      25,       20,       30,       55,       35,       75,       50,        90,       90,        0     };


/*============================================================================*/
// Standby posture
int Servo_Prg_0 [][ALLMATRIX] PROGMEM = {
  //    0    ,   1    ,   2    ,   3    ,   4    ,   5    ,  6    ,   7    ,   8    ,   9    ,   10   ,    11   ,    12   ,    13   ,    14   ,    15   ,    G12   ,   G14   ,   ms
  {    65,      35,      80,      60,      80,     100,     95,      80,      40,      25,       20,       30,       55,       35,       75,       50,        90,       90,      500   }     // right now
};


/*============================================================================*/
// Bowing action
int Servo_Prg_1 [][ALLMATRIX] PROGMEM = {
  //    0    ,    1    ,  2    ,   3    ,   4    ,   5    ,  6    ,   7    ,   8    ,   9    ,   10   ,     11   ,    12   ,    13   ,    14   ,    15   ,    G12   ,   G14   ,    ms
  {    65,      35,      80,      60,      80,     120,     80,      40,     110,      25,      100,        30,       55,       35,       75,       50,        90,       90,      500   },   // Standing right hand before the flat lift in the left hand back pendulum
  {    65,      20,      80,      10,      80,     120,     80,      40,     110,      25,      100,        30,      102,       35,       90,       50,        90,       90,      500   },   // Standing right hand before the flat lift in the left hand behind the bow bow
  {    65,      20,      80,      10,      80,     120,     80,      40,     110,      25,      100,        30,      102,       35,       90,       50,        90,       90,     1000   },   //  Bow to wait
  {    65,      35,      80,      60,      80,     100,     95,      80,      40,      25,       20,        30,       55,       35,       75,       50,        90,       90,      800   }    // stand at attention
};


/*============================================================================*/
// Waving action
int Servo_Prg_2 [][ALLMATRIX] PROGMEM = {
  //    0    ,   1    ,   2    ,   3    ,   4    ,   5    ,  6    ,   7    ,   8    ,   9    ,   10   ,    11   ,    12   ,    13   ,    14   ,    15   ,    G12   ,   G14   ,    ms
  {    65,      35,      80,      60,      80,     100,     95,      80,      20,      70,      120,       30,       55,       35,       75,       50,        50,       90,      500   },     // Straight right hand up to the outside turn right
  {    65,      35,      80,      60,      80,     100,     95,      80,      40,      30,      120,       30,       55,       35,       75,       50,        50,       90,      300   },     // Raise your right hand up and turn right inside
  {    65,      35,      80,      60,      80,     100,     95,      80,      20,      70,      120,       30,       55,       35,       75,       50,        50,       90,      300   },     // Straight right hand up to the outside turn right
  {    65,      35,      80,      60,      80,     100,     95,      80,      40,      30,      120,       30,       55,       35,       75,       50,        50,       90,      300   },     // Raise your right hand up and turn right inside
  {    65,      35,      80,      60,      80,       0,     50,     100,      40,      30,       25,       30,       55,       35,       75,       50,       130,       90,      500   },     // Standing on the left hand lift to the outside turn left
  {    65,      35,      80,      60,      80,       0,     80,      80,      40,      30,       25,       30,       55,       35,       75,       50,       130,       90,      300   },     // Standing on the left hand up to the inside turn left
  {    65,      35,      80,      60,      80,       0,     50,     100,      40,      30,       25,       30,       55,       35,       75,       50,       130,       90,      300   },     // Standing on the left hand lift to the outside turn left
  {    65,      35,      80,      60,      80,       0,     80,      80,      40,      30,       25,       30,       55,       35,       75,       50,       130,       90,      300   },     // Standing on the left hand up to the inside turn left
  {    65,      35,      80,      60,      80,     100,     95,      80,      40,      25,       20,       30,       55,       35,       75,       50,        90,       90,      500   }      // stand at attention
};


/*============================================================================*/
// Steel man action
int Servo_Prg_3 [][ALLMATRIX] PROGMEM = {
  //    0    ,    1    ,    2    ,    3    ,    4    ,    5    ,    6    ,    7    ,    8    ,    9    ,    10   ,    11   ,    12   ,    13   ,    14   ,    15   ,   G12   ,  G14   ,  ms
  {    75,      35,      80,      60,      90,     120,     70,     120,      0,      100,      20,       40,       55,       35,       75,       60,        50,       90,      300   },     // 身體左傾斜 右手上抬 掌向外 頭右轉
  {    75,      35,      80,      60,      90,     120,     70,     120,      0,      100,      20,       40,       55,       35,       75,       60,        50,       90,      800   },     // 身體左傾斜 右手上抬 掌向外 頭右轉
  {    55,      35,      80,      60,      70,     100,     20,     120,      0,       50,        0,        20,       55,       35,       75,       40,       130,      90,      300   },     // 身體右傾斜 左手上抬 掌向外 頭左轉
  {    55,      35,      80,      60,      70,     100,     20,     120,      0,       50,        0,        20,       55,       35,       75,       40,       130,      90,      800   },     // 身體右傾斜 左手上抬 掌向外 頭左轉
  {    65,      35,      80,      60,      80,      20,      70,     120,      0,       50,      100,      30,       55,       35,       75,       50,        90,       90,      500   },     // 立正 雙手上抬 掌向外
  {    65,      20,      80,      45,      80,      20,     105,    120,      0,       10,      100,      30,       70,       35,       89,       50,        90,       90,      500   },     // 身體後傾斜 雙手上抬 掌向內
  {    65,      20,      80,      45,      80,      20,     105,    120,      0,       10,      100,      30,       70,       35,       89,       50,        90,       90,      800   },     // 身體後傾斜 雙手上抬 掌向內
  {    65,      35,      80,      60,      80,     100,     95,      80,      40,      25,       20,       30,       55,       35,       75,       50,        90,       90,      500   }      // 立正
};


/*============================================================================*/
// Api action
int Servo_Prg_4 [][ALLMATRIX] PROGMEM = {
  //    0    ,    1    ,    2    ,    3    ,    4    ,    5    ,    6    ,    7    ,    8    ,    9    ,    10   ,    11   ,    12   ,    13   ,    14   ,    15   ,   G12   ,  G14   ,  ms
  {    55,      35,      80,      60,      70,     100,     70,      30,      40,      80,       20,       20,       55,       35,       75,       40,        90,       90,      500   },    // 身體右傾斜
  {    55,      35,      80,      60,      70,     100,     70,      30,      40,      80,       20,       20,       55,       35,       75,       35,       130,      90,      300   },    // 身體右傾斜 左腳預抬 頭左轉
  {    55,      35,      80,      60,      70,     100,     70,      30,     100,     10,      100,      40,       55,       35,       75,       30,       130,      90,      500   },    // 身體右傾斜 右手敬禮 左腳上抬 頭左轉
  {    55,      35,      80,      60,      70,     100,     70,      30,     100,     10,      100,      40,       55,       35,       75,       30,       130,      90,      800   },    // 身體右傾斜 右手敬禮 左腳上抬 頭左轉
  {    55,      35,      80,      60,      70,     100,     70,      30,      40,      80,       20,       20,       55,       35,       75,       35,       130,      90,      600   },    // 身體右傾斜 左腳預抬 頭左轉
  {    55,      35,      80,      60,      70,     100,     70,      30,      40,      80,       20,       20,       55,       35,       75,       40,        90,       90,      500   },    // 身體右傾斜
  {    65,      35,      80,      60,      80,     100,     95,      80,      40,      25,       20,       30,       55,       35,       75,       50,        90,       90,      500   }      // 立正
};


/*============================================================================*/
// One foot balance action is small
int Servo_Prg_5 [][ALLMATRIX] PROGMEM = {
  //    0    ,    1    ,    2    ,    3    ,    4    ,    5    ,    6    ,    7    ,    8    ,    9    ,    10   ,    11   ,    12   ,    13   ,    14   ,    15   ,   G12   ,  G14   ,  ms
  {    75,      35,      80,      60,      90,     100,     20,      80,      40,     100,      20,       40,       55,       35,       75,       60,        90,       90,      500   },     // 身體左傾斜 雙手平舉上抬
  {    75,      35,      80,      60,      90,      50,      20,      80,      40,     100,      70,       40,       55,       35,       80,       60,        90,       90,      300   },     // 身體左傾斜 雙手平舉上抬旋轉 右腳預抬
  {    80,      35,      80,      60,      70,      50,      20,      80,      40,     100,      70,       40,       55,       35,       80,       60,        90,       90,      500   },     // 身體左傾斜 雙手平舉上抬旋轉 右腳上抬
  {    80,      35,      80,      60,      70,      50,      20,      80,      40,     100,      70,       40,       55,       35,       80,       60,        90,       90,      600   },     // 身體左傾斜 雙手平舉上抬旋轉 右腳上抬
  {    80,      15,      80,       0,       70,      50,      20,      80,      40,     100,      70,       40,       55,       35,       80,       60,        90,       90,      900   },     // 身體前傾斜 雙手平舉上抬旋轉 右腳上抬
  {    80,      15,      80,       0,       70,      50,       0,       80,      40,     120,      70,       40,       55,       35,       80,       60,        50,       90,      500   },     // 身體前傾斜 雙手平舉上抬旋轉 右腳上抬 上
  {    80,      15,      80,       0,       70,      50,      40,      80,      40,      80,       70,       40,       55,       35,       80,       60,       130,      90,      500   },     // 身體前傾斜 雙手平舉上抬旋轉 右腳上抬 下
  {    80,      15,      80,       0,       70,      50,       0,       80,      40,     120,      70,       40,       55,       35,       80,       60,        50,       90,      500   },     // 身體前傾斜 雙手平舉上抬旋轉 右腳上抬 上
  {    80,      15,      80,       0,       70,      50,      40,      80,      40,      80,       70,       40,       55,       35,       80,       60,       130,      90,      500   },     // 身體前傾斜 雙手平舉上抬旋轉 右腳上抬 下
  {    80,      15,      80,       0,       70,      50,      20,      80,      40,     100,      70,       40,       55,       35,       80,       60,        90,       90,      500   },     // 身體前傾斜 雙手平舉上抬旋轉 右腳上抬
  {    80,      35,      80,      60,      70,      50,      20,      80,      40,     100,      70,       40,       55,       35,       80,       60,        90,       90,      800   },     // 身體左傾斜 雙手平舉上抬旋轉 右腳上抬
  {    65,      35,      80,      60,      80,     100,     95,      80,      40,      25,       20,       30,       55,       35,       75,       50,        90,       90,      500   }      // 立正
};


/*============================================================================*/
// 暖身動作
int Servo_Prg_6 [][ALLMATRIX] PROGMEM = {
  //    0    ,    1    ,    2    ,    3    ,    4    ,    5    ,    6    ,    7    ,    8    ,    9    ,    10   ,    11   ,    12   ,    13   ,    14   ,    15   ,   G12   ,  G14   ,  ms
  {    65,      35,      80,      60,      80,     100,     70,      20,     100,     50,       20,       30,       55,       35,       75,       50,        90,       90,      800   },     // 雙手插腰
  {    65,      35,      80,      60,      80,     100,     70,      20,     100,     50,       20,       30,       55,       35,       75,       50,        50,       90,      500   },     // 雙手插腰 頭右轉
  {    65,      35,      80,      60,      80,     100,     70,      20,     100,     50,       20,       30,       55,       35,       75,       50,        50,       90,      500   },     // 雙手插腰 頭右轉
  {    65,      35,      80,      60,      80,     100,     70,      20,     100,     50,       20,       30,       55,       35,       75,       50,       130,      90,      500   },     // 雙手插腰 頭左轉
  {    65,      35,      80,      60,      80,     100,     70,      20,     100,     50,       20,       30,       55,       35,       75,       50,       130,      90,      500   },     // 雙手插腰 頭左轉
  {    55,      35,      80,      60,      70,     100,     70,      20,      40,     100,      20,       20,       55,       35,       75,       40,        50,       90,      800   },     // 身體右傾斜 右手平舉 左手擺頭頂 頭右轉
  {    55,      35,      80,      60,      70,     100,     70,      20,      40,     100,      20,       20,       55,       35,       75,       40,        50,       90,      500   },     // 身體右傾斜 右手平舉 左手擺頭頂 頭右轉
  {    75,      35,      80,      60,      90,     100,     20,      80,     100,     50,       20,       40,       55,       35,       75,       60,       130,      90,      800   },     // 身體左傾斜 左手平舉 右手擺頭頂 頭左轉
  {    75,      35,      80,      60,      90,     100,     20,      80,     100,     50,       20,       40,       55,       35,       75,       60,       130,      90,      500   },     // 身體左傾斜 左手平舉 右手擺頭頂 頭左轉
  {    65,      35,      80,      60,      80,     100,     70,      20,     100,     50,       20,       30,       55,       35,       75,       50,        90,       90,      500   },     // 雙手插腰
  {    65,      62,      15,      17,      80,      15,      95,      80,      40,      25,      100,      30,       95,      100,      48,       50,        90,       90,      800   },     // 蹲下 雙手向前平舉
  {    65,      62,      15,      17,      80,      15,      95,      80,      40,      25,      100,      30,       95,      100,      48,       50,        90,       90,      300   },     // 蹲下 雙手向前平舉
  {    65,      35,      80,      60,      80,     100,     70,      20,     100,     50,       20,       30,       55,       35,       75,       50,        90,       90,      500   },     // 雙手插腰
  {    65,      62,      15,      17,      80,      15,      95,      80,      40,      25,      100,      30,       95,      100,      48,       50,        90,       90,      800   },     // 蹲下 雙手向前平舉
  {    65,      62,      15,      17,      80,      15,      95,      80,      40,      25,      100,      30,       95,      100,      48,       50,        90,       90,      300   },     // 蹲下 雙手向前平舉
  {    65,      35,      80,      60,      80,     100,     95,      80,      40,      25,       20,       30,       55,       35,       75,       50,        90,       90,      800   }      // 立正
};


/*============================================================================*/
// Warm-up action
int Servo_Prg_10 [][ALLMATRIX] PROGMEM = {
  //    0    ,    1    ,    2    ,    3    ,    4    ,    5    ,    6    ,    7    ,    8    ,    9    ,    10   ,    11   ,    12   ,    13   ,    14   ,    15   ,   G12   ,  G14   ,  ms
  {    65,      59,      36,      39,      80,     100,     95,      80,      40,      25,       20,       30,       75,       80,       50,       50,        90,       90,      500   },     // 淺蹲

  {    55,      59,      36,      39,      70,     100,     95,      80,      40,      25,       20,       20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    55,      62,      15,      17,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      600   },     // 淺蹲 右傾斜 左腳上抬
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      500   },     // 淺蹲 右傾斜 左腳前移
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       40,        90,       90,      300   },     // 淺蹲 右傾斜 左腳放下

  {    75,      40,      45,      30,      90,     100,     95,      80,      40,      25,       20,       40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       95,      100,      48,       60,        90,       90,      600   },     // 淺蹲 左傾斜 右腳上抬
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      500   },     // 淺蹲 左傾斜 右腳前移
  {    75,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      300   },     // 淺蹲 左傾斜 右腳放下

  {    55,      59,      36,      39,      70,     100,     95,      80,      40,      25,       20,       20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    55,      62,      15,      17,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      600   },     // 淺蹲 右傾斜 左腳上抬
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      500   },     // 淺蹲 右傾斜 左腳前移
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       40,        90,       90,      300   },     // 淺蹲 右傾斜 左腳放下

  {    75,      40,      45,      30,      90,     100,     95,      80,      40,      25,       20,       40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       95,      100,      48,       60,        90,       90,      600   },     // 淺蹲 左傾斜 右腳上抬
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      500   },     // 淺蹲 左傾斜 右腳前移
  {    75,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      300   },     // 淺蹲 左傾斜 右腳放下

  {    55,      59,      36,      39,      70,     100,     95,      80,      40,      25,       20,       20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    55,      62,      15,      17,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      600   },     // 淺蹲 右傾斜 左腳上抬
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      500   },     // 淺蹲 右傾斜 左腳前移
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       40,        90,       90,      300   },     // 淺蹲 右傾斜 左腳放下

  {    75,      40,      45,      30,      90,     100,     95,      80,      40,      25,       20,       40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       95,      100,      48,       60,        90,       90,      600   },     // 淺蹲 左傾斜 右腳上抬
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      500   },     // 淺蹲 左傾斜 右腳前移
  {    75,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      300   },     // 淺蹲 左傾斜 右腳放下

  {    55,      59,      36,      39,      70,     100,     95,      80,      40,      25,       20,       20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    65,      35,      80,      60,      80,     100,     95,      80,      40,      25,       20,       30,       55,       35,       75,       50,        90,       90,      300   }      // 立正
};


/*============================================================================*/
// Back action
int Servo_Prg_11 [][ALLMATRIX] PROGMEM = {
  //    0    ,   1    ,   2    ,   3    ,   4    ,   5    ,   6    ,   7    ,   8    ,   9    ,   10   ,     11   ,    12   ,    13   ,    14   ,    15   ,    G12   ,   G14   ,    ms
  {    65,      59,      36,      39,      80,     100,      95,      80,      40,      25,       20,        30,       75,       80,       50,       50,        90,       90,      500   },     // 淺蹲
 
  {    55,      59,      36,      39,      70,     100,      95,      80,      40,      25,       20,        20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    55,      62,      15,      17,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      600   },     // 淺蹲 右傾斜 左腳上抬
  {    55,      82,      48,      75,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      500   },     // 淺蹲 右傾斜 左腳後移
  {    55,      55,      80,      80,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      300   },     // 淺蹲 右傾斜 左腳放下

  {    75,      40,      45,      30,      90,     100,      95,      80,      40,      25,       20,        40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    80,      59,      36,      39,      90,     120,      95,      80,      40,      25,       50,        40,       95,      100,       48,       60,        50,       90,      600   },     // 淺蹲 左傾斜 右腳上抬
  {    80,      59,      36,      39,      90,     120,      95,      80,      40,      25,       50,        40,       42,       70,       27,       60,        50,       90,      500   },     // 淺蹲 左傾斜 右腳後移
  {    80,      59,      36,      39,      90,     120,      95,      80,      40,      25,       50,        40,       35,       35,       51,       60,        50,       90,      300   },     // 淺蹲 左傾斜 右腳放下

  {    55,      59,      36,      39,      70,     100,      95,      80,      40,      25,       20,        20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    55,      62,      15,      17,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      600   },     // 淺蹲 右傾斜 左腳上抬
  {    55,      82,      48,      75,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      500   },     // 淺蹲 右傾斜 左腳後移
  {    55,      55,      80,      80,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      300   },     // 淺蹲 右傾斜 左腳放下

  {    75,      40,      45,      30,      90,     100,      95,      80,      40,      25,       20,        40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    80,      59,      36,      39,      90,     120,      95,      80,      40,      25,       50,        40,       95,      100,       48,       60,        50,       90,      600   },     // 淺蹲 左傾斜 右腳上抬
  {    80,      59,      36,      39,      90,     120,      95,      80,      40,      25,       50,        40,       42,       70,       27,       60,        50,       90,      500   },     // 淺蹲 左傾斜 右腳後移
  {    80,      59,      36,      39,      90,     120,      95,      80,      40,      25,       50,        40,       35,       35,       51,       60,        50,       90,      300   },     // 淺蹲 左傾斜 右腳放下

  {    55,      59,      36,      39,      70,     100,      95,      80,      40,      25,       20,        20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    65,      35,      80,      60,      80,     100,      95,      80,      40,      25,       20,        30,       55,       35,       75,       50,        90,       90,      300   }      // 立正
};


/*============================================================================*/
// Turn left
int Servo_Prg_12 [][ALLMATRIX] PROGMEM = {
  //    0    ,   1    ,   2    ,   3    ,   4    ,   5    ,   6    ,   7    ,   8    ,   9    ,   10   ,    11   ,     12   ,    13   ,    14   ,    15   ,    G12   ,   G14   ,    ms
  {    65,      59,      36,      39,      80,     100,      95,      80,      40,      25,       20,       30,        75,       80,       50,       50,        90,       90,      500   },     // 淺蹲

  {    75,      40,      45,      30,      90,     100,      95,      80,      40,      25,       20,        40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       95,      100,       48,       60,        90,       90,      600   },     // 淺蹲 左傾斜 右腳上抬
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      500   },     // 淺蹲 左傾斜 右腳前移
  {    75,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      300   },     // 淺蹲 左傾斜 右腳放下

  {    55,      59,      36,      39,      70,     100,      95,      80,      40,      25,       20,        20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    55,      62,      15,      17,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      600   },     // 淺蹲 右傾斜 左腳上抬
  {    55,      82,      48,      75,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      500   },     // 淺蹲 右傾斜 左腳後移
  {    55,      55,      80,      80,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      300   },     // 淺蹲 右傾斜 左腳放下

  {    75,      40,      45,      30,      90,     100,      95,      80,      40,      25,       20,        40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       95,      100,       48,       60,        90,       90,      600   },     // 淺蹲 左傾斜 右腳上抬
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      500   },     // 淺蹲 左傾斜 右腳前移
  {    75,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      300   },     // 淺蹲 左傾斜 右腳放下

  {    55,      59,      36,      39,      70,     100,      95,      80,      40,      25,       20,        20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    55,      62,      15,      17,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      600   },     // 淺蹲 右傾斜 左腳上抬
  {    55,      82,      48,      75,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      500   },     // 淺蹲 右傾斜 左腳後移
  {    55,      55,      80,      80,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      300   },     // 淺蹲 右傾斜 左腳放下

  {    75,      40,      45,      30,      90,     100,      95,      80,      40,      25,       20,        40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       95,      100,       48,       60,        90,       90,      600   },     // 淺蹲 左傾斜 右腳上抬
  {    80,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      500   },     // 淺蹲 左傾斜 右腳前移
  {    75,      59,      36,      39,      90,      70,      95,      80,      40,      25,        0,        40,       82,       70,       70,       60,        90,       90,      300   },     // 淺蹲 左傾斜 右腳放下

  {    55,      59,      36,      39,      70,     100,      95,      80,      40,      25,       20,        20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    55,      62,      15,      17,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      600   },     // 淺蹲 右傾斜 左腳上抬
  {    55,      82,      48,      75,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      500   },     // 淺蹲 右傾斜 左腳後移
  {    55,      55,      80,      80,      70,      70,      95,      80,      40,      25,        0,        20,       75,       80,       50,       35,       130,       90,      300   },     // 淺蹲 右傾斜 左腳放下

  {    75,      40,      45,      30,      90,     100,      95,      80,      40,      25,       20,        40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    65,      35,      80,      60,      80,     100,      95,      80,      40,      25,       20,        30,       55,       35,       75,       50,        90,       90,      300   }      // 立正
};


/*============================================================================*/
// Turn right
int Servo_Prg_13 [][ALLMATRIX] PROGMEM = {
  //    0    ,   1    ,   2    ,   3    ,   4    ,   5    ,    6    ,    7    ,    8    ,    9    ,    10   ,    11   ,    12   ,    13   ,    14   ,    15   ,   G12   ,  G14   ,  ms
  {    65,      59,      36,      39,      80,     100,     95,      80,      40,      25,       20,       30,       75,       80,       50,       50,        90,       90,      500   },     // 淺蹲

  {    55,      59,      36,      39,      70,     100,     95,      80,      40,      25,       20,       20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    55,      62,      15,      17,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      600   },     // 淺蹲 右傾斜 左腳上抬
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      500   },     // 淺蹲 右傾斜 左腳前移
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       40,        90,       90,      300   },     // 淺蹲 右傾斜 左腳放下

  {    75,      40,      45,      30,      90,     100,     95,      80,      40,      25,       20,       40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    80,      59,      36,      39,      90,     120,     95,      80,      40,      25,       50,       40,       95,      100,       48,       60,        50,       90,      600   },     // 淺蹲 左傾斜 右腳上抬
  {    80,      59,      36,      39,      90,     120,     95,      80,      40,      25,       50,       40,       42,       70,       27,       60,        50,       90,      500   },     // 淺蹲 左傾斜 右腳後移
  {    80,      59,      36,      39,      90,     120,     95,      80,      40,      25,       50,       40,       35,       35,       51,       60,        50,       90,      300   },     // 淺蹲 左傾斜 右腳放下

  {    55,      59,      36,      39,      70,     100,     95,      80,      40,      25,       20,       20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    55,      62,      15,      17,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      600   },     // 淺蹲 右傾斜 左腳上抬
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      500   },     // 淺蹲 右傾斜 左腳前移
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       40,        90,       90,      300   },     // 淺蹲 右傾斜 左腳放下

  {    75,      40,      45,      30,      90,     100,     95,      80,      40,      25,       20,       40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    80,      59,      36,      39,      90,     120,     95,      80,      40,      25,       50,       40,       95,      100,       48,       60,        50,       90,      600   },     // 淺蹲 左傾斜 右腳上抬
  {    80,      59,      36,      39,      90,     120,     95,      80,      40,      25,       50,       40,       42,       70,       27,       60,        50,       90,      500   },     // 淺蹲 左傾斜 右腳後移
  {    80,      59,      36,      39,      90,     120,     95,      80,      40,      25,       50,       40,       35,       35,       51,       60,        50,       90,      300   },     // 淺蹲 左傾斜 右腳放下

  {    55,      59,      36,      39,      70,     100,     95,      80,      40,      25,       20,       20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    55,      62,      15,      17,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      600   },     // 淺蹲 右傾斜 左腳上抬
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       35,        90,       90,      500   },     // 淺蹲 右傾斜 左腳前移
  {    55,      40,      45,      30,      70,     120,     95,      80,      40,      25,       50,       20,       75,       80,       50,       40,        90,       90,      300   },     // 淺蹲 右傾斜 左腳放下

  {    75,      40,      45,      30,      90,     100,     95,      80,      40,      25,       20,       40,       75,       80,       50,       60,        90,       90,      500   },     // 淺蹲 左傾斜
  {    80,      59,      36,      39,      90,     120,     95,      80,      40,      25,       50,       40,       95,      100,       48,       60,        50,       90,      600   },     // 淺蹲 左傾斜 右腳上抬
  {    80,      59,      36,      39,      90,     120,     95,      80,      40,      25,       50,       40,       42,       70,       27,       60,        50,       90,      500   },     // 淺蹲 左傾斜 右腳後移
  {    80,      59,      36,      39,      90,     120,     95,      80,      40,      25,       50,       40,       35,       35,       51,       60,        50,       90,      300   },     // 淺蹲 左傾斜 右腳放下

  {    55,      59,      36,      39,      70,     100,     95,      80,      40,      25,       20,       20,       75,       80,       50,       40,        90,       90,      500   },     // 淺蹲 右傾斜
  {    65,      35,      80,      60,      80,     100,     95,      80,      40,      25,       20,       30,       55,       35,       75,       50,        90,       90,      300   }      // 立正
};



/*============================================================================*/
void Set_PWM_to_Servo(int iServo, int iValue)
{

  if (iServo >= 17)
  {
    GPIO14SERVO.write(iValue);
  }
  else if (iServo >= 16)
  {
    GPIO12SERVO.write(iValue);
  }
  else
  {
    int NewPWM = map(iValue, PWMRES_Min, PWMRES_Max, SERVOMIN, SERVOMAX);
    pwm.setPWM(iServo, 0, NewPWM);
  }
}

void servoInit()
{
    // Software PWM PIN
  GPIO12SERVO.attach(12);
  GPIO14SERVO.attach(14);

  // PWMServoDriver
  pwm.begin();
  pwm.setPWMFreq(50);   // servos run at 50Hz updates

}

